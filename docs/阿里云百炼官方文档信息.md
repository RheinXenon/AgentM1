#从官方文档获取的信息

三、使用API Key
方式一：在第三方工具中调用模型
如果在Chatbox等工具或平台中调用模型，您可能需要输入三个信息：
本文获取的API Key
Base URL：https://dashscope.aliyuncs.com/compatible-mode/v1
如果使用新加坡地域的模型，需要将url替换为：https://dashscope-intl.aliyuncs.com/compatible-mode/v1
模型名称，如qwen-plus
我们也提供了一些常用工具的配置方法：Dify、Chatbox、Cline、Claude Code、Postman。
方式二：通过代码调用模型
如果通过代码调用模型，建议配置API Key到环境变量，避免将API Key明文写在代码中，从而降低泄漏风险。



通义千问API参考
本文介绍通义千问 API 的输入输出参数。
OpenAI 兼容
使用SDK调用时需配置的base_url：https://dashscope.aliyuncs.com/compatible-mode/v1
使用HTTP方式调用时需配置的endpoint：POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
请求体：
文本输入（单轮对话）：
import os
from openai import OpenAI


client = OpenAI(
    # 若没有配置环境变量，请用百炼API Key将下行替换为：api_key="sk-xxx",
    api_key=os.getenv("DASHSCOPE_API_KEY"),
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
)

completion = client.chat.completions.create(
    # 模型列表：https://help.aliyun.com/zh/model-studio/getting-started/models
    model="qwen-plus",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "你是谁？"},
    ],
    # Qwen3模型通过enable_thinking参数控制思考过程（开源版默认True，商业版默认False）
    # 使用Qwen3开源版模型时，若未启用流式输出，请将下行取消注释，否则会报错
    # extra_body={"enable_thinking": False},
)
print(completion.model_dump_json())
流式输出：
import os
from openai import OpenAI

client = OpenAI(
    # 若没有配置环境变量，请用百炼API Key将下行替换为：api_key="sk-xxx",
    api_key=os.getenv("DASHSCOPE_API_KEY"),
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
)
completion = client.chat.completions.create(
    model="qwen-plus",  # 此处以qwen-plus为例，可按需更换模型名称。模型列表：https://help.aliyun.com/zh/model-studio/getting-started/models
    messages=[{'role': 'system', 'content': 'You are a helpful assistant.'},
                {'role': 'user', 'content': '你是谁？'}],
    stream=True,
    stream_options={"include_usage": True}
    )
for chunk in completion:
    print(chunk.model_dump_json())

model string （必选）：我目前准备选用qwen-plus

通用文本向量：
同步接口api详情：
使用SDK调用时需配置的base_url：https://dashscope.aliyuncs.com/compatible-mode/v1
使用HTTP方式调用时需配置的endpoint：POST https://dashscope.aliyuncs.com/compatible-mode/v1/embeddings
批处理接口API详情：
HTTP调用
HTTP调用仅支持异步模式，需通过两步完成：
创建任务：首先发送一个请求创建任务，该请求会返回任务ID。
根据任务ID查询结果：使用上一步获得的任务ID，查询模型生成的结果。
通过HTTP调用时需配置的endpoint：
POST https://dashscope.aliyuncs.com/api/v1/services/embeddings/text-embedding/text-embedding


